<template>
  <div class="layout">
    <p
      class="highlight leading-tight md:leading-normal text-base p-2 bg-red-600 text-white text-center md:text-xl"
    >
      <g-link to="/tmaction" class="text-white underline">
        Get the latest updates about our ongoing litigation against the City of
        Toronto and Urbancorp.
      </g-link>
    </p>

    <header class="header container mx-auto my-6 md:my-24 px-4 md:px-12">
      <div class="flex justify-between flex-row flex-no-wrap flex-1 my-6">
        <g-link to="/" class="self-center">
          <svg
            version="1.1"
            class="w-32"
            id="Layer_1"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0px"
            y="0px"
            viewBox="0 0 381.5 182.9"
            style="enable-background:new 0 0 381.5 182.9;"
            xml:space="preserve"
          >
            <title>tmac_logo_black</title>
            <g id="Layer_2_1_">
              <g id="Layer_1-2">
                <g class="st0">
                  <path
                    d="M69.1,43.1l-10.2,82.6H44.7l10.2-82.6H31.9l1.6-13.2h59.1L91,43.1H69.1z"
                  />
                </g>
                <g class="st0">
                  <path
                    d="M186,23.1l8.7,115.4h-14.9l-4.7-67.2l-40.8,74.6l-22.6-74.6l-21,67.2h-16l36.5-112.9l26.7,86.2L186,23.1z"
                  />
                </g>
                <g class="st0">
                  <path
                    d="M227.8,98.4L215,123.2h-17l58.3-113l36.4,113h-16.3l-7.7-24.8H227.8z M234.6,84.9h29.8L253,47.4L234.6,84.9z"
                  />
                </g>
                <g class="st0">
                  <path
                    d="M372.8,38.5L370.9,54c-8.3-8.4-18.2-12.7-29.7-12.7c-10.1,0-18.3,3.6-24.6,10.8c-6.3,7.2-9.4,16.5-9.4,28
				c0,10.8,3,19.2,9.1,25.2c6,6,14.5,9,25.5,9c9.1,0,17.2-2.8,24.2-8.4l-2,16.8c-8.8,3.3-17,4.9-24.7,4.9
				c-13.9,0-25.1-4.4-33.6-13.2c-8.5-8.7-12.7-20.4-12.7-34.9c0-14.8,4.5-27.1,13.5-36.9c9.1-9.8,20.5-14.7,34.2-14.7
				C351.3,28,362.1,31.5,372.8,38.5z"
                  />
                </g>
                <g class="st0">
                  <path d="M5.2,157.4H0.5v-2.2h11.9v2.2H7.8v18.2H5.2V157.4z" />
                </g>
                <g class="st0">
                  <path
                    d="M21.9,154.9c4.5,0,7.4,3.9,7.4,10.2c0,7-2.8,10.6-7.7,10.6c-4.5,0-7.4-3.9-7.4-10.2C14.2,158.5,17.1,154.9,21.9,154.9z
				 M21.7,173.7c2.7,0,5-2.2,5-8.5c0-4.1-1.3-8.1-4.7-8.1c-2.7,0-5,2.2-5,8.5C16.9,169.7,18.2,173.7,21.7,173.7z"
                  />
                  <path
                    d="M34.2,155.1h5.2c2.2,0,3.4,0.5,4.3,1.4c1.1,1,1.5,2.4,1.5,3.9c0,2.2-1,4.2-4,4.9v0.1c1.2,0.2,1.8,0.8,2.2,2l2.9,8.2h-2.8
				l-2.3-6.9c-0.6-1.7-1.3-2.3-3.2-2.3h-1.2v9.2h-2.6V155.1z M36.7,164.2h2c2.7,0,3.8-1.8,3.8-3.6c0-2.3-1.5-3.4-3.7-3.4h-2V164.2z"
                  />
                  <path
                    d="M57.3,154.9c4.5,0,7.4,3.9,7.4,10.2c0,7-2.8,10.6-7.7,10.6c-4.5,0-7.4-3.9-7.4-10.2C49.7,158.5,52.5,154.9,57.3,154.9z
				 M57.1,173.7c2.7,0,5-2.2,5-8.5c0-4.1-1.3-8.1-4.7-8.1c-2.7,0-5,2.2-5,8.5C52.4,169.7,53.6,173.7,57.1,173.7z"
                  />
                  <path
                    d="M69.6,155.1h3.2l7.7,16.8h0.1v-16.8H83v20.4h-3.2l-7.7-16.7H72v16.7h-2.5V155.1z"
                  />
                </g>
                <g class="st0">
                  <path
                    d="M91.6,157.4h-4.7v-2.2h11.9v2.2h-4.7v18.2h-2.6V157.4z"
                  />
                </g>
                <g class="st0">
                  <path
                    d="M108.3,154.9c4.5,0,7.4,3.9,7.4,10.2c0,7-2.8,10.6-7.7,10.6c-4.5,0-7.4-3.9-7.4-10.2
				C100.6,158.5,103.5,154.9,108.3,154.9z M108.1,173.7c2.7,0,5-2.2,5-8.5c0-4.1-1.3-8.1-4.7-8.1c-2.7,0-5,2.2-5,8.5
				C103.3,169.7,104.6,173.7,108.1,173.7z"
                  />
                  <path
                    d="M128.8,155.1h4l5.1,16.2h0.1l5.2-16.2h3.9v20.4h-2.5V158h-0.1l-5.8,17.6h-1.9l-5.6-17.6h-0.1v17.6h-2.5V155.1z"
                  />
                  <path
                    d="M152.7,155.1h9.5v2.2h-6.9v6.5h6.6v2.2h-6.6v7.3h7.3v2.2h-9.9V155.1z"
                  />
                  <path
                    d="M167.1,155.1h4.4c2.7,0,4.3,0.6,5.4,1.5c1.8,1.3,3.8,3.8,3.8,8.4c0,5.9-2.8,10.5-10.5,10.5h-3.2V155.1z M169.7,173.3h1.6
				c4.5,0,6.8-3.1,6.8-8.3c0-4.3-1.8-7.7-6.8-7.7h-1.6V173.3z"
                  />
                  <path d="M185.4,155.1h2.6v20.4h-2.6V155.1z" />
                  <path
                    d="M201.2,155.1l6.7,20.4h-2.7l-1.6-5.3h-7.8l-1.6,5.3h-2.6l6.8-20.4H201.2z M202.9,168l-3.1-10.2h-0.1l-3.2,10.2H202.9z"
                  />
                </g>
                <g class="st0">
                  <path
                    d="M225.8,155.1l6.7,20.4h-2.7l-1.6-5.3h-7.8l-1.6,5.3h-2.6l6.8-20.4H225.8z M227.4,168l-3.1-10.2h-0.1L221,168H227.4z"
                  />
                </g>
                <g class="st0">
                  <path
                    d="M236.1,155.1h5.2c2.2,0,3.4,0.5,4.3,1.4c1.1,1,1.5,2.4,1.5,3.9c0,2.2-1,4.2-4,4.9v0.1c1.2,0.2,1.8,0.8,2.2,2l2.9,8.2
				h-2.8l-2.3-6.9c-0.6-1.7-1.3-2.3-3.2-2.3h-1.2v9.2h-2.6V155.1z M238.7,164.2h2c2.8,0,3.8-1.8,3.8-3.6c0-2.3-1.5-3.4-3.7-3.4h-2
				V164.2z"
                  />
                </g>
                <g class="st0">
                  <path
                    d="M254.3,157.4h-4.7v-2.2h11.9v2.2h-4.7v18.2h-2.6V157.4z"
                  />
                  <path
                    d="M274,158.1c-1-0.6-2.2-0.9-3.5-0.9c-1.9,0-3.2,1.3-3.2,3c0,1.3,0.5,2.1,3.5,3.8c3.2,1.8,4.2,3.6,4.2,5.9
				c0,3.2-2,5.8-5.9,5.8c-1.6,0-3.2-0.4-4.3-0.9v-2.7c1.2,0.7,2.7,1.3,3.9,1.3c2.3,0,3.6-1.5,3.6-3.2c0-1.6-0.4-2.5-3.2-4.2
				c-3.7-2.2-4.5-3.5-4.5-6.1c0-3.4,2.6-5.1,5.7-5.1c1.3,0,2.8,0.3,3.7,0.7V158.1z"
                  />
                  <path
                    d="M299.9,175.2c-1.2,0.4-2.5,0.6-3.7,0.6c-6.5,0-9.2-4.9-9.2-10.4c0-6.4,3.7-10.4,9-10.4c1.5,0,2.9,0.3,3.9,0.7v2.5
				c-1.1-0.7-2.4-1-3.8-1c-3.3,0-6.4,2.7-6.4,7.6c0,5.3,2.1,8.7,6.6,8.7c1.3,0,2.6-0.4,3.7-1V175.2z"
                  />
                  <path
                    d="M304.8,155.1h9.5v2.2h-6.9v6.5h6.6v2.2h-6.6v7.3h7.3v2.2h-9.9V155.1z"
                  />
                  <path
                    d="M319.5,155.1h3.2l7.7,16.8h0.1v-16.8h2.5v20.4h-3.2l-7.7-16.7h-0.1v16.7h-2.5V155.1z"
                  />
                  <path
                    d="M341.5,157.4h-4.7v-2.2h11.9v2.2h-4.7v18.2h-2.6V157.4z"
                  />
                  <path
                    d="M352.7,155.1h5.2c2.2,0,3.4,0.5,4.3,1.4c1.1,1,1.5,2.4,1.5,3.9c0,2.2-1,4.2-4,4.9v0.1c1.2,0.2,1.8,0.8,2.2,2l2.9,8.2H362
				l-2.3-6.9c-0.6-1.7-1.3-2.3-3.2-2.3h-1.2v9.2h-2.6V155.1z M355.3,164.2h2c2.8,0,3.8-1.8,3.8-3.6c0-2.3-1.5-3.4-3.7-3.4h-2V164.2z
				"
                  />
                  <path
                    d="M369,155.1h9.5v2.2h-6.9v6.5h6.6v2.2h-6.6v7.3h7.3v2.2H369V155.1z"
                  />
                </g>
              </g>
            </g>
          </svg>
        </g-link>
        <div class="buttons flex justify-end ">
          <div class="self-center hidden md:block">
            <a
              class="btn"
              href="https://calendly.com/tomediaarts/space-tour"
              target="_blank"
              >Book a Tour</a
            >
          </div>
          <div class="md:hidden self-center ">
            <button @click="toggle" class="flex items-center py-2 btn ">
              Menu
              <!-- <font-awesome :icon="['fa', 'bars']" /> -->
            </button>
          </div>
        </div>
      </div>

      <nav
        class="main nav flex flex-wrap justify-between flex-col md:flex-row md:flex md:flex-no-wrap md:flex-initial md:w-auto md:mt-0 md:relative md:h-auto md:w-auto md:bg-transparent md:p-0 fixed top-0 left-0 right-0 h-full w-full bg-gray-300 z-10 p-6 flex-1 "
        :class="isOpen ? 'block' : 'hidden'"
      >
        <div class="md:hidden justify-end self-end absolute ">
          <button @click="toggle" class="flex items-center py-2 btn ">
            Close
          </button>
        </div>
        <div class="md:hidden ">
          <g-link to="/" class="home-link inline-flex tracking-tight text-3xl "
            >Home</g-link
          >
        </div>
        <div v-for="item in menu" :key="item.id">
          <g-link
            :to="item.to"
            class="tracking-tight text-3xl md:text-xl w-full "
            >{{ item.title }}</g-link
          >
          <ul
            v-if="item.submenu"
            class="submenu md:hidden mt-1 list-none flex justify-between text-lg"
          >
            <li
              v-for="item in item.submenu"
              :key="item.id"
              class="text-xl md:text-base my-2"
            >
              <g-link :to="item.to">{{ item.title }}</g-link>
            </li>
          </ul>
        </div>
      </nav>
      <nav v-if="submenu" class="subnav hidden md:block">
        <div
          v-for="item in submenu"
          :key="item.id"
          class="mr-8 my-6 lg:mb-0 inline-flex text-lg"
        >
          <g-link :to="item.to">{{ item.title }}</g-link>
        </div>
      </nav>
    </header>
    <transition name="fade" appear>
      <main class="container mx-auto px-4 md:px-12">
        <slot />
      </main>
    </transition>
    <Footer />
  </div>
</template>

<static-query>
query {
  metadata {
    siteName
  }

}
</static-query>

<script>
import Footer from "../components/Footer";

export default {
  components: {
    Footer
  },

  metaInfo: {
    htmlAttrs: {
      lang: "en",
      class: "text-gray-900 antialiased"
    },
    bodyAttrs: {
      class:
        "font-sans text-copy-primary font-body tracking-tight text-xl flex flex-col min-h-screen"
    },
    titleTemplate: "Toronto Media Arts Centre â€“ %s"
  },
  watch: {
    $route: {
      handler: function(current) {
        const route = this.menu.filter(route =>
          current.path.includes(route.to)
        );
        if (route[0]) {
          if (route && Array.isArray(route[0].submenu)) {
            this.submenu = route[0].submenu;
          } else if (route) {
            this.submenu = [];
          }
        }
      },
      immediate: true
    }
  },
  data() {
    return {
      submenu: [],
      isOpen: false,
      isActive: false,
      menu: [
        {
          title: "#TMACtion",
          to: "/tmaction",
          submenu: [
            {
              title: "News",
              to: "/tmaction/news"
            },
            {
              title: "FAQs",
              to: "/tmaction/faqs"
            },
            {
              title: "Press",
              to: "/tmaction/press"
            }
          ]
        },

        { title: "Events", to: "/events" },
        { title: "Exhibitions", to: "/exhibitions" },
        { title: "Rentals", to: "/space-rentals" },
        {
          title: "About",
          to: "/about"
        },
        { title: "Location", to: "/location" }
      ]
    };
  },
  methods: {
    toggle() {
      this.isOpen = !this.isOpen;
    }
  }
};
</script>

<style lang="postcss">
nav {
  div:first-child a {
    @apply ml-0;
  }
}
.btn {
  @apply m-0 pt-3 leading-none bg-black text-sm uppercase text-white py-2 px-4 rounded-sm no-underline;
}
@media (max-width: 767px) {
  /* nav.main {
    @apply fixed top-0 left-0 right-0 h-full w-full bg-green-300 z-10 block p-6;
    div {
      @apply w-full;
      a {
        @apply text-2xl;
      }
    }

    overflow: auto;
  } */
}
</style>
