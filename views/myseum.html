<extends src='layout.html'>

  <block name='meta'></block>

  <block name="nav"></block>

  <block name='content'>
    <main class="slider event-grid">
<pre>
  {{ JSON.stringify( dato.program, null, 2 ) }}

</pre>

      <each loop='event in dato.event'>
        <if condition='event.past !== true && event.parentId == "123"'>
          <div class="event daily" style="background-image: url('//{{ dato._meta.imgixHost + event.featureImage.path }}?bm=normal&balph=70&blend={{ event.canceled == true ? 'eeeeee' : '322D5A'}}'); background-size: cover;" data-startDate="{{ Date.parse(event.startDateTime) }}"  class="{{ event.canceled == true ? 'canceled' : ''}}">

            <a href="">
              <div class="desc">
                <div class="title">
                  <if condition="event.canceled == true">
                    <span class="canceled">Canceled</span>
                  </if>
                  <if condition="event.member[0] && event.presenter">
                    <p class="presenter">{{ event.member[0].name }} & {{ event.presenter }}</p>
                  </if>
                  <elseif condition="event.member[0]">
                    <p class="presenter">{{ event.member[0].name }}</p>
                  </elseif>
                  <elseif condition="event.presenter">
                    <p class="presenter">{{ event.presenter }}</p>
                  </elseif>
                  <if condition="event.location[0]">
                    <div class="spaces">
                      <each loop='space in event.location'>
                        <p class="space">
                          {{ space.name }}
                        </p>
                      </each>
                    </div>
                  </if>
                </div>
                <h3>{{ event.title }}</h3>
                <div class="when">
                  <!-- // if the event starts and ends on same day -->
                  <if condition="dateFns.isSameDay(event.startDateTime,event.endDateTime) == true">
                    <p class="date">
                      {{ df(event.startDateTime, "UTC:mmmm d", true)}}
                    </p>
                  </if>

                  <!-- // if the event spans multiple days, but starts and ends in same month, -->
                  <!-- // don't show month name twice -->
                  <elseif condition="dateFns.isSameMonth(event.startDateTime,event.endDateTime) == true">
                    <p class="date">
                      {{ df(event.startDateTime, "UTC:mmmm d", true)}}–{{ df(event.endDateTime, "UTC:d", true)}}
                    </p>
                  </elseif>
                  <else>
                    <p class="date">
                      {{ df(event.startDateTime, "UTC:mmmm d", true)}}–{{ df(event.endDateTime, "UTC:mmmm d", true)}}
                    </p>
                  </else>
                </div>

                <div class="register">
                  <if condition="dateFns.isToday(event.startDateTime) == true">
                    <p class="thisweek">
                      Today
                    </p>
                  </if>
                  <elseif condition="dateFns.isThisWeek(event.startDateTime) == true">
                    <p class="thisweek">
                      {{ dateFns.format(event.startDateTime, 'dddd') }}
                    </p>
                  </elseif>
                </div>
              </div>
            </a>
          </div>
        </if>
      </each>
    </main>
  </block>
  <block name='footer'></block>

  <block name='javascript'>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.8.3/min/tiny-slider.js"></script>
    <script src="/js/vendor/tinysort.js"></script>
    <script>
    tinysort('.event-grid .exhibition',{data:'startdate', order:'asc'});
    tinysort('.event-grid .daily',{data:'startdate', order:'asc'});
    var slider = tns({
      items: 2,
      speed: 300,
      slideBy: 1,
      autoplay: true,
      axis: 'horizontal',
      controls: false,
      mode: 'carousel',
      nav: false,
      autoplayButtonOutput: false,
      // autoplayTimeout: 5000
    });
    slider.play();
    </script>
  </block>

</extends>